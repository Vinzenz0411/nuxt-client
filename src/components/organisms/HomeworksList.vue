<template>
	<v-list subheader two-line>
		<v-subheader>{{ $t("pages.homeworks.subtitleOpen") }}</v-subheader>
		<template v-for="(homework, index) of homeworks">
			<v-list-item :key="homework._id" :href="'/homework/' + homework._id">
				<v-list-item-avatar>
					<img :src="taskImage" role="presentation" />
				</v-list-item-avatar>
				<v-list-item-content>
					<v-list-item-subtitle class="text-wrap">
						{{ homework.courseName }}
					</v-list-item-subtitle>
					<v-list-item-title
						class="text-wrap"
						v-text="homework.name"
					></v-list-item-title>
				</v-list-item-content>
				<v-list-item-action>
					<v-list-item-action-text
						v-text="computedDueDateLabel(homework.duedate)"
					/>
					<v-spacer />
					<v-badge v-if="false" color="error" dot inline></v-badge>
				</v-list-item-action>
			</v-list-item>
			<v-divider v-if="index < homeworks.length - 1" :key="index"></v-divider>
		</template>
	</v-list>
</template>

<script>
import { mapGetters } from "vuex";
import { fromNow } from "@plugins/datetime";
import taskImage from "@assets/img/courses/task-new.svg";
import { printDateTimeFromStringUTC } from "@plugins/datetime";

export default {
	components: {},
	data() {
		return {
			fromNow,
			taskImage: taskImage,
		};
	},
	computed: {
		...mapGetters("homeworks", {
			homeworks: "list",
		}),
	},
	methods: {
		computedDueDateLabel(duedate) {
			if (duedate) {
				return new Date(duedate) >= new Date()
					? this.$t("pages.homeworks.labels.due") +
							printDateTimeFromStringUTC(duedate)
					: this.$t("pages.homeworks.labels.overdue");
			} else {
				return this.$t("pages.homeworks.labels.noDueDate");
			}
		},
	},
};
</script>
